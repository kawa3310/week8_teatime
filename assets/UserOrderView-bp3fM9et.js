import{a as y,S as d}from"./sweetalert2.all-Pn1vR6wA.js";import{_ as B,r as T,o as i,c as n,e as L,a as t,t as e,F as V,j as S}from"./index-YrOX5VuD.js";var C={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"reirei",BASE_URL:"/week8_teatime/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:E,VITE_PATH:I}=C,O={data(){return{orderId:"",order:{},isloading:!1}},methods:{getOrder(){this.orderId=this.$route.params.id,this.isloading=!0,y.get(`${E}/api/${I}/order/${this.orderId}`).then(r=>{this.isloading=!1,this.order=r.data.order}).catch(r=>{this.isloading=!1,d.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,icon:"error",title:r.response.data.message})})},checkout(){this.isloading=!0,this.orderId=this.$route.params.id,y.post(`${E}/api/${I}/pay/${this.orderId}`).then(()=>{this.isloading=!1,this.$router.push("/user/merchandise"),d.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,icon:"success",title:"結帳成功"})}).catch(r=>{this.isloading=!1,d.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,icon:"error",title:r.response.data.message})})}},mounted(){this.getOrder()}},R={class:"pb-5"},D={class:"container"},U={class:"row justify-content-center flex-md-row"},$={class:"col-md-7"},j=t("h2",{class:"order-color text-center my-5"},"訂單已成立",-1),A={class:"border p-4 shadow-sm p-3 mb-5 bg-body rounded"},N=t("h4",{class:"mb-4 fw-bold text-center my-5"},"您的訂單編號",-1),P={class:"fs-8 text-center text-danger"},F={class:"d-flex"},H={class:"w-100 px-4"},q={class:"table table-borderless custom-cart-table my-5"},z=t("th",{class:"fs-8 px-md-3 border",width:"30%"},"姓名",-1),M={class:"fs-8 px-md-3 border",width:"70%"},G=t("th",{class:"fs-8 px-md-3 border",width:"30%"},"聯絡電話",-1),J={class:"fs-8 px-md-3 border",width:"70%"},K=t("th",{class:"fs-8 px-md-3 border",width:"30%"},"Email",-1),Q={class:"fs-8 px-md-3 border",width:"70%"},W=t("th",{class:"fs-8 px-md-3 border",width:"30%"},"收件地址",-1),X={class:"fs-8 px-md-3 border",width:"70%"},Y=t("h4",{class:"mb-4 fw-bold text-center"},"商品資訊",-1),Z={class:"table table-borderless custom-cart-table mt-5 border"},tt=t("thead",null,[t("tr",null,[t("th",{class:"px-2 px-md-3 border text-center",width:"40%"},"商品名稱 "),t("th",{class:"px-2 px-md-3 border text-center",width:"20%"},"數量 "),t("th",{class:"px-2 px-md-3 border text-center",width:"30%"},"金額 ")])],-1),st={class:"px-2 px-md-3 border text-center",width:"40%"},et={class:"px-2 px-md-3 border text-center",width:"20%"},ot={class:"px-2 px-md-3 border text-center",width:"30%"},rt={class:"d-flex justify-content-end mt-4 ps-2"},dt={class:"mb-0 h5 mb-3 text-end"},it={class:"text-center"};function nt(r,c,ct,at,o,a){var l,h,_,p,u,x,m,b,f,w,g;const k=T("VueLoading");return i(),n(V,null,[L(k,{active:o.isloading,"z-index":1060},null,8,["active"]),t("div",R,[t("div",D,[t("div",U,[t("div",$,[j,t("div",A,[N,t("p",P,e((l=o.order)==null?void 0:l.id),1),t("div",F,[t("div",H,[t("table",q,[t("tbody",null,[t("tr",null,[z,t("td",M,e((_=(h=o.order)==null?void 0:h.user)==null?void 0:_.name),1)]),t("tr",null,[G,t("td",J,e((u=(p=o.order)==null?void 0:p.user)==null?void 0:u.tel),1)]),t("tr",null,[K,t("td",Q,e((m=(x=o.order)==null?void 0:x.user)==null?void 0:m.email),1)]),t("tr",null,[W,t("td",X,e((f=(b=o.order)==null?void 0:b.user)==null?void 0:f.address),1)])])]),Y,t("table",Z,[tt,(i(!0),n(V,null,S((w=o.order)==null?void 0:w.products,s=>{var v;return i(),n("tbody",{key:s.id},[t("tr",null,[t("td",st,e((v=s==null?void 0:s.product)==null?void 0:v.title),1),t("td",et,e(s==null?void 0:s.qty),1),t("td",ot,e(s==null?void 0:s.total),1)])])}),128))])])]),t("div",rt,[t("p",dt,"總金額: NT$"+e((g=o.order)==null?void 0:g.total),1)]),t("div",it,[t("button",{type:"submit",class:"btn btn-secondary py-3 px-3 rounded-0",onClick:c[0]||(c[0]=(...s)=>a.checkout&&a.checkout(...s))},"去結帳")])])])])])])],64)}const _t=B(O,[["render",nt]]);export{_t as default};
