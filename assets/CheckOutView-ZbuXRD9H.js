import{a as u}from"./axios-G2rPRu76.js";import{S as l}from"./sweetalert2.all-WjRCQhhK.js";import{_ as V,r as w,o as d,c,d as p,b as t,k as m,F as C,h as j,j as B,l as I,t as r,w as f,e as v,p as T,g as S}from"./index-XTxDnD0T.js";var E={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"reirei",BASE_URL:"/week8_teatime/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:h,VITE_PATH:_}=E,L={data(){return{cart:{},voucher:{code:"PUFFY123"},useCode:!1,isloading:!1}},methods:{getCart(){this.isloading=!0,u.get(`${h}/api/${_}/cart`).then(s=>{this.isloading=!1,this.cart=s.data.data}).catch(s=>{this.isloading=!1,l.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,icon:"error",title:s.response.data.message})})},delCart(s){this.cart.id=s,this.isloading=!0,u.delete(`${h}/api/${_}/cart/${s}`).then(()=>{this.isloading=!1,this.getCart(),l.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,icon:"success",title:"已刪除"})}).catch(n=>{this.isloading=!1,l.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,icon:"error",title:n.response.data.message})})},delItems(){this.isloading=!0,u.delete(`${h}/api/${_}/carts`).then(()=>{this.isloading=!1,this.getCart(),l.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,icon:"success",title:"已刪除全部購物車"})}).catch(s=>{this.isloading=!1,l.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,icon:"error",title:s.response.data.message})})},reviseCart(s,n){const g={product_id:s.product_id,qty:n};u.put(`${h}/api/${_}/cart/${s.id}`,{data:g}).then(()=>{this.getCart()}).catch(y=>{l.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,icon:"error",title:y.response.data.message})})},useVoucher(){u.post(`${h}/api/${_}/coupon`,{data:this.voucher}).then(()=>{this.getCart(),this.voucher.code="",this.useCode=!0}).catch(s=>{l.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,icon:"error",title:s.response.data.message})})}},mounted(){this.getCart(),this.useCode=!1}},i=s=>(T("data-v-0d147b20"),s=s(),S(),s),R={key:0,class:"container pb-5"},N=i(()=>t("div",{class:"row justify-content-center mb-5"},[t("div",{class:"col-9 col-md-8 position-relative mt-6"},[t("div",{class:"progress",style:{height:"5px"}},[t("div",{class:"progress-bar",role:"progressbar",style:{width:"0%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),t("div",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-dark rounded-pill",style:{width:"3rem",height:"3rem"}},[t("div",{class:"mt-2"},[t("i",{class:"bi bi-cart"})])]),t("button",{type:"button",class:"position-absolute top-0 start-50 translate-middle btn btn-sm btn-secondary rounded-pill d-flex",style:{width:"2rem",height:"2rem"}},[t("i",{class:"bi bi-clipboard"})]),t("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem"}},[t("i",{class:"bi bi-credit-card-2-back"})])])],-1)),U={class:"row justify-content-center"},q={class:"col-md-8 bg-white",style:{"min-height":"calc(100vh - 56px - 76px)"}},D={class:"d-flex justify-content-center"},$={key:0,class:"my-4"},F={class:"d-flex flex-column justify-content-center"},O={class:"row align-items-center px-1 py-1"},P={class:"col-12 col-md-4"},A=["src"],H={class:"col-12 col-md-8"},M={class:"p-3"},z={class:"d-flex justify-content-between"},Y={class:"mb-0 lh-lg fw-bold"},G=["onClick"],J=i(()=>t("i",{class:"bi-icon bi bi-trash"},null,-1)),K=[J],Q={class:"mb-1 fs-8 text-muted mb-3"},W={class:"row"},X={class:"col-md-8"},Z={class:"input-group d-flex"},tt=["onClick"],st=i(()=>t("i",{class:"bi bi-plus fs-7"},null,-1)),et=[st],ot={class:"form-control text-center mx-2",placeholder:"",min:"1"},it=["onClick","disabled"],nt=i(()=>t("i",{class:"bi bi-dash fs-7"},null,-1)),dt=[nt],ct={class:"col-md-4 mt-3"},at={class:"text-nowrap fs-8"},lt={key:0,class:"order"},rt={class:"card-total d-flex justify-content-end"},ut={class:"col-6"},ht={class:"input-group input-group-sm mb-3"},_t={key:0,class:"card-total d-flex justify-content-end"},pt={class:"fs-9 fw-bold"},bt={class:"card-total d-flex justify-content-end"},mt=i(()=>t("p",{class:"mb-0 h6 fw-bold"},"總金額：",-1)),ft={class:"mb-0 h6 fw-bold"},vt={class:"d-flex justify-content-between mt-5"},gt={class:"bt"},yt=i(()=>t("i",{class:"bi bi-caret-left"},null,-1)),xt={class:"bt mx-2"},wt={class:"order"},Ct=i(()=>t("i",{class:"bi bi-caret-right"},null,-1)),kt={key:1,class:"py-7"},Vt=i(()=>t("h5",{class:"text-center"},"你的購物車是空的喔，快去選購吃甜點吧！",-1)),jt={class:"d-flex justify-content-center mt-5"},Bt={class:"bt"},It=i(()=>t("i",{class:"bi bi-caret-left"},null,-1)),Tt=i(()=>t("i",{class:"bi bi-caret-left"},null,-1)),St=i(()=>t("i",{class:"bi bi-caret-left"},null,-1));function Et(s,n,g,y,o,a){const k=w("VueLoading"),b=w("RouterLink");return d(),c(C,null,[p(k,{active:o.isloading,"z-index":1060},null,8,["active"]),o.cart.total!==0?(d(),c("div",R,[N,t("div",U,[t("div",q,[t("div",D,[o.cart.total!==0?(d(),c("h2",$,"購物車")):m("",!0)]),t("div",F,[(d(!0),c(C,null,j(o.cart.carts,e=>(d(),c("div",{class:"shadow-sm mb-5 bg-body rounded border overflow-hidden",key:e.id},[t("div",O,[t("div",P,[t("img",{src:e.product.imageUrl,alt:"商品圖片",class:"img-product w-100"},null,8,A)]),t("div",H,[t("div",M,[t("div",z,[t("p",Y,r(e.product.title),1),t("a",{type:"button",onClick:x=>a.delCart(e.id)},K,8,G)]),t("p",Q,r(e.product.content),1),t("div",W,[t("div",X,[t("div",Z,[t("button",{class:"btn d-flex rounded-0 border-0 px-md-0",type:"button",onClick:x=>a.reviseCart(e,e.qty+1)},et,8,tt),t("span",ot,r(e.qty),1),t("button",{class:"btn d-flex rounded-0 border-0 px-md-0",type:"button",onClick:x=>a.reviseCart(e,e.qty-1),disabled:e.qty===1},dt,8,it)])]),t("div",ct,[t("div",at,"NT $"+r(e.total/e.qty),1)])])])])])]))),128))]),o.cart.total!==0?(d(),c("div",lt,[t("div",rt,[t("div",ut,[t("div",ht,[B(t("input",{type:"text",class:"form-control rounded-0","onUpdate:modelValue":n[0]||(n[0]=e=>o.voucher.code=e),placeholder:"請輸入折扣碼","aria-label":"voucher","aria-describedby":"basic-addon1"},null,512),[[I,o.voucher.code]]),t("button",{type:"button",class:"btn btn-outline-success input-group-text rounded-0",onClick:n[1]||(n[1]=(...e)=>a.useVoucher&&a.useVoucher(...e))},"套用優惠券")])])]),o.useCode?(d(),c("div",_t,[t("p",pt,"-優惠卷折扣 "+r(s.$filter.currency(o.cart.total-o.cart.final_total)),1)])):m("",!0),t("div",bt,[mt,t("p",ft,"NT$"+r(s.$filter.currency(o.cart.final_total)),1)]),t("div",vt,[t("div",gt,[p(b,{to:"/merchandise",class:"btn btn-outline-secondary rounded-0"},{default:f(()=>[yt,v(" 繼續選購 ")]),_:1})]),t("div",xt,[t("button",{type:"button",class:"btn btn-outline-secondary rounded-0",onClick:n[2]||(n[2]=(...e)=>a.delItems&&a.delItems(...e))},"清空")]),t("div",wt,[p(b,{to:"/orderOut",class:"order btn btn-danger rounded-0"},{default:f(()=>[v("結帳帶回家 "),Ct]),_:1})])])])):m("",!0)])])])):(d(),c("div",kt,[Vt,t("div",jt,[t("div",Bt,[p(b,{to:"/merchandise",class:"btn btn-outline-primary rounded-0"},{default:f(()=>[It,Tt,St,v(" 來去選購 ")]),_:1})])])]))],64)}const Ut=V(L,[["render",Et],["__scopeId","data-v-0d147b20"]]);export{Ut as default};
