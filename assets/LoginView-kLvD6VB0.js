import{a,S as d}from"./sweetalert2.all-VTsAtsNN.js";import{_ as m,o as p,c as h,a as e,w as f,b as c,v as l}from"./index-omQM2LBf.js";var _={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"reirei",BASE_URL:"/week8_teatime/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:u}=_,w={data(){return{user:{username:"",password:""}}},methods:{login(){a.post(`${u}/admin/signin`,this.user).then(o=>{const{token:s,expired:n}=o.data;document.cookie=`kawaToken=${s}; expires = ${new Date(n)}; path=/`,this.$router.push("admin/products")}).catch(o=>{d.fire({toast:!0,position:"center",showConfirmButton:!1,timer:1500,icon:"error",title:o.response.data.message})})},cheakLongin(){a.post(`${u}/api/user/check`).then(()=>{this.$router.push("admin/products")}).catch(o=>{d.fire({toast:!0,position:"center",showConfirmButton:!1,timer:1500,icon:"error",title:o.response.data.message}),this.$router.push("/")})}},mounted(){this.cheakLongin()}},g={class:"container"},v={class:"row justify-content-center my-5"},b={class:"col-5"},k=e("h1",{class:"h3 my-4 text-center font-weight-normal"}," 登入 ",-1),x={class:"form-floating mb-3"},E=e("label",{for:"username"},"Email address",-1),V={class:"form-floating"},y=e("label",{for:"password"},"Password",-1),B=e("button",{class:"btn btn-lg btn-secondary w-100 mt-3 mb-4 rounded-0",type:"submit"}," 登入 ",-1);function L(o,s,n,S,r,i){return p(),h("div",g,[e("div",v,[e("div",b,[k,e("form",{id:"form",class:"form-signin",onSubmit:s[2]||(s[2]=f((...t)=>i.login&&i.login(...t),["prevent"]))},[e("div",x,[c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.user.username=t),type:"email",class:"form-control rounded-0",id:"username",placeholder:"name@example.com",required:"",autofocus:""},null,512),[[l,r.user.username]]),E]),e("div",V,[c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.user.password=t),type:"password",class:"form-control rounded-0",id:"password",placeholder:"Password",required:""},null,512),[[l,r.user.password]]),y]),B],32)])])])}const R=m(w,[["render",L]]);export{R as default};
